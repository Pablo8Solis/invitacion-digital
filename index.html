<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Invitacion</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/meyer-reset/2.0/reset.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400..900&family=Playfair+Display:ital,wght@0,400..900;1,400..900&family=Roboto:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <script src="javaScript/animacion.js" defer></script>
    <link rel="icon" type="image/png" href="assets/iconfav.png">
</head>
<body>
    <div id="preloader">
        <div class="half left"></div>
        <div class="half right"></div>
    </div>

    <div id="content" class="hidden">
        <header class="header">
            <div class="overlay"></div> 
                <video class="video-header" autoplay muted loop playsinline>
                    <source src="img/video-fondo.mp4" type="video/mp4">
                    Tu navegador no soporta videos.
                </video>
            <div class="contenido">
                <p class="header__title tracking-in-expand">¡Nos Casamos!</p>
                <p class="header__title header__title-name tracking-in-expand">Margarita & <br> Roberto</p>  
            </div>
            
            <div class="contenido header__music">
            <button class="header__music-button" id="playButton">Presiona aquí</button>
            <audio  id="audioElement" src="assets/cancion-fondo.mp3"></audio>
            </div>
        </header>

        <main class="main">
            <section class="main__invitacion">
                <h2 class="main__invitacion-title tracking-in-expand-fwd-bottom">Es un honor invitarlos</h2>
                <p class="main__invitacion-text tracking-in-expand-fwd-bottom">Nos embarcamos a una nueva aventura, y nuestra boda no estaría completa sin la presencia de nuestros seres queridos, así que queremos que estés allí con nosotros.</p>
                <div class="main__invitacion-box-imagenes">
                <img class="img-animation main__invitacion-box-imagenes-img1" src="img/title-img.JPG" alt="foto">
                <img class="img-animation main__invitacion-box-imagenes-img2" src="img/button-img.JPG" alt="imgbtn">
                </div>
                <p class="main__invitacion-text-edit tracking-in-expand-fwd-bottom">Con la bendición de Dios y nuestros padres</p>
            </section>

            <section class="main__countdown main__contador">
                <h2 class="main__contador-title-1 tracking-in-expand-fwd-bottom">Nuestra boda será el sabado:</h2>
                <div class="main__contador-fecha tracking-in-expand-fwd-bottom">
                    <p class="main__contador-fecha-num">02</p>
                    <span class="main__contador-fecha-span"></span>
                    <p class="main__contador-fecha-num">Agosto</p>
                    <span class="main__contador-fecha-span"></span>
                    <p class="main__contador-fecha-num">2025</p>
                </div>
                <p class="main__countdown-title main__contador-title tracking-in-expand-fwd-bottom">Solo faltan:</p>
                    <div class="contador tracking-in-expand-fwd-bottom">
                        <div class="unidad">
                            <span id="dias">00</span>
                            <p>Días</p>
                        </div>
                            <div class="unidad">
                            <span id="horas">00</span>
                        <p>Horas</p>
                        </div>
                        <div class="unidad">
                            <span id="minutos">00</span>
                            <p>Minutos</p>
                        </div>
                        <div class="unidad">
                            <span id="segundos">00</span>
                            <p>Segundos</p>
                        </div>
                    </div>

                    <div class="main__contador-box-calendar tracking-in-expand-fwd-bottom">
                        <a class="main__contador-calendar" href="assets/Boda Margarita & Roberto.ics"> 
                            <object type="image/svg+xml" data="assets/icon-calendar.svg">
                                Tu navegador no soporta SVG.
                            </object>
                            Guarda la fecha
                        </a>
                    </div>
            </section>

            <section class="main__lugar tracking-in-expand-fwd-bottom">
                <article class="main__lugar-info">
                    <div class="main__lugar-box-text">
                        <h2 class="main__lugar-title">Lugar</h2>
                        <p class="main__lugar-text">Santuario de Guadalupe <br>  <span class="main__lugar-text-span">5:50 P.M. - 7:00 P.M.</span></p>
                    </div>

                    <div class="main__lugar-box-button">
                        <a class="main__lugar-button" href="https://maps.app.goo.gl/HVfjqLCgveq2XtH97">Ver ubicación</a>
                    </div>
                </article>
                    
                <article class="main__lugar-foto">
                    
                </article>
            </section>

            <section class="main__recepcion tracking-in-expand-fwd-bottom">
                <article class="main__recepcion-foto">

                </article>

                <article class="main__recepcion-info">
                    <div>
                        <h2 class="main__recepcion-title">Recepción</h2>
                        <p class="main__recepcion-text">La Alborada <br> (salón del fondo) <br> <span class="main__recepcion-text-span">8:00 P.M. - 2:00 A.M.</span></p>
                    </div>

                    <div>
                        <a class="main__recepcion-button" href="https://maps.app.goo.gl/eHvpNbTMYhh2uvSy9">Ver ubicación</a>
                    </div>
                </article>
            </section>

            <section class="main__vestimenta tracking-in-expand-fwd-bottom">
                <h2 class="main__vestimenta-title">Vestimenta</h2>
                <div class="main__vestimenta-box-text">
                    <p class="main__vestimenta-text">Vestimenta formal para hombres y vestido largo para mujeres</p>
                    <p class="main__vestimenta-text">Evita el color blanco, beige y café en tu eleccion de vestimenta en honor a nuestra celebración</p>
                    <p class="main__vestimenta-text-important">Evita los siguientes colores:</p>
                </div>

                <article class="main__vestimenta-box-color">
                    <div class="main__vestimenta-colors main__vestimenta-color-1"></div>
                    <div class="main__vestimenta-colors main__vestimenta-color-2"></div>
                    <div class="main__vestimenta-colors main__vestimenta-color-3"></div>
                </article>
            </section>

            <section class="main__album tracking-in-expand-fwd-bottom">
                <video id="miVideo" class="main__album-video" muted autoplay playsinline>
                    <source src="assets/beige-icon.mp4" type="video/mp4">
                    Tu navegador no soporta el video.
                </video>
                <h2 class="main__album-title">Comparte fotos</h2>
                <p class="main__album-text">¡Sube fotos de la boda al álbum!</p>

                <a class="main__album-button" href="https://drive.google.com/drive/folders/1W8daX8hXYh-v8dwZSE74lbGGh6ZDbo7q">Subir foto</a>
            </section>

            <div class="carousel-container tracking-in-expand-fwd-bottom">
                <div class="carousel left">
                    <div class="color-track">
                        <div class="color-block color1"></div>
                        <div class="color-block color2"></div>
                        <div class="color-block color3"></div>
                        <div class="color-block color4"></div>
                        <div class="color-block color5"></div>
                        <div class="color-block color6"></div>
                        <div class="color-block color1"></div>
                        <div class="color-block color2"></div>
                        <div class="color-block color3"></div>
                        <div class="color-block color4"></div>
                        <div class="color-block color5"></div>
                        <div class="color-block color6"></div>
                    </div>
                </div>
                <div class="carousel right">
                    <div class="color-track">
                        <div class="color-block color4"></div>
                        <div class="color-block color5"></div>
                        <div class="color-block color6"></div>
                        <div class="color-block color1"></div>
                        <div class="color-block color2"></div>
                        <div class="color-block color3"></div>
                        <div class="color-block color4"></div>
                        <div class="color-block color5"></div>
                        <div class="color-block color6"></div>
                        <div class="color-block color1"></div>
                        <div class="color-block color2"></div>
                        <div class="color-block color3"></div>
                    </div>
                </div>
            </div>




            <section class="main__form tracking-in-expand-fwd-bottom">
                <div class="main__form-border">
                    <h2 class="main__form-title">Confirmar <br> Asistencia</h2>
                    <p class="main__form-text">Por favor, confirma tu asistencia <br>
                    ¡Esperamos que estés allí!</p>
                    <p id="mensaje" value="x"></p>

                    <form id="miFormulario" class="main__form-box"
                        action="https://formspree.io/f/xkgozpoz"
                        method="POST">
                        <div class="main__form-box-radio" id="opcionesAsistencia">
                            <p class="opcionesAsistencia-style">Por favor, confirma cuántos lugares ocuparás:</p>
                        </div>
                        <label class="main__form-box-label">
                            <input class="main__form-box-label-input-box" type="text" name="nombre" placeholder="Nombre de los invitados" required>
                        </label>
                        <label class="main__form-box-label">
                            <textarea class="main__form-box-label-texarea" name="mensaje" placeholder="Mensaje o frase para los novios:" required></textarea>
                        </label>
                        <input type="hidden" name="lugares_reservados" id="lugaresReservados">

                        
                        <button class="main__form-button" type="submit">Enviar Respuesta</button>
                    </form>
                </div>
            </section>

        </main>
    </div>    
    <!--<script>
        document.addEventListener("DOMContentLoaded", function () {
            // Obtener los parámetros de la URL
            const params = new URLSearchParams(window.location.search);
            const nombre = params.get("nombre") || "invitado";
            const lugares = params.get("lugares") || "1";
    
            // Mostrar mensaje personalizado
            document.getElementById("mensaje").innerText = 
                `Hola, ${nombre}. Tienes ${lugares} lugar(es) reservado(s).`;
    
            // Limpiar la URL eliminando los parámetros
            window.history.replaceState({}, document.title, window.location.pathname);
        });
    </script> -->
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const invitados = [
            { codigo: "abc123", nombre: "Pablo", lugares: 2 },
            { codigo: "xyz789", nombre: "Ana", lugares: 3 },
            { codigo: "lmn456", nombre: "Juan", lugares: 1 },
            { codigo: "pqr321", nombre: "Karla", lugares: 5 }
        ];

        invitados.forEach(inv => {
        const enlace = `https://bodamargaritayroberto.netlify.app/?codigo=${inv.codigo}`;
        console.log(enlace);
        });
        
            // Obtener el código de la URL
            const params = new URLSearchParams(window.location.search);
            const codigo = params.get("codigo");

    
        
            // Buscar al invitado por su código
            const invitado = invitados.find(inv => inv.codigo === codigo);
        
            // Asegurar que el mensaje se actualiza correctamente
            const mensajeElemento = document.getElementById("mensaje");
            const opcionesAsistencia = document.getElementById("opcionesAsistencia");
            const inputLugares = document.getElementById("lugaresReservados");
        
            if (invitado) {
                mensajeElemento.innerText = `Hola, ${invitado.nombre}. Tienes ${invitado.lugares} lugar(es) reservado(s).`;
                mensajeElemento.style.color="#D4AF37";
        
                // Asignar el número de lugares al input oculto
                if (inputLugares) {
                    inputLugares.value = invitado.lugares;
                }
        
                // Limpiar opciones previas y generar las nuevas
                if (opcionesAsistencia) {
                    opcionesAsistencia.innerHTML = "";
        
                    // Opción para confirmar asistencia con todos los lugares asignados
                    const labelTodos = document.createElement("label");
                    labelTodos.classList.add("main__form-box-label");
                    labelTodos.innerHTML = `
                        <input class="main__form-box-label-radio" type="radio" name="asistencia" value="Todos asistirán" required>
                        Asistiremos todos (${invitado.lugares} persona(s))
                    `;
                    opcionesAsistencia.appendChild(labelTodos);
        
                    // Si tiene más de 1 lugar, dar opción de asistir con menos
                    if (invitado.lugares > 1) {
                        for (let i = 1; i < invitado.lugares; i++) {
                            const labelParcial = document.createElement("label");
                            labelParcial.classList.add("main__form-box-label");
                            labelParcial.innerHTML = `
                                <input class="main__form-box-label-radio" type="radio" name="asistencia" value="${i} persona(s) asistirán">
                                Solo asistiremos ${i} persona(s)
                            `;
                            opcionesAsistencia.appendChild(labelParcial);
                        }
                    }
        
                    // Opción para no asistir
                    const labelNo = document.createElement("label");
                    labelNo.classList.add("main__form-box-label");
                    labelNo.innerHTML = `
                        <input class="main__form-box-label-radio" type="radio" name="asistencia" value="No asistiremos">
                        No podremos asistir
                    `;
                    opcionesAsistencia.appendChild(labelNo);
                }
            } else {
                mensajeElemento.innerText = "Código inválido o no registrado.";
                mensajeElemento.style.color ="red";

                // Prevenir el envío del formulario si el código es inválido
                document.getElementById("miFormulario").addEventListener('submit', function(event) {
                event.preventDefault();  // Previene el envío del formulario
                alert("Por favor, ingresa un código válido para confirmar tu asistencia.");
                });
            }
        
            // Limpiar la URL eliminando los parámetros
            window.history.replaceState({}, document.title, window.location.pathname);
        });
        </script>
        
</body>
</html>